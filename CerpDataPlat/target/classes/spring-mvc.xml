<?xml version="1.0" encoding="GBK"?>
<beans xmlns="http://www.springframework.org/schema/beans"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:p="http://www.springframework.org/schema/p"
	xmlns:context="http://www.springframework.org/schema/context"
	xmlns:mvc="http://www.springframework.org/schema/mvc" xmlns:aop="http://www.springframework.org/schema/aop"
	xsi:schemaLocation="
       http://www.springframework.org/schema/beans
       http://www.springframework.org/schema/beans/spring-beans.xsd
       http://www.springframework.org/schema/context
       http://www.springframework.org/schema/context/spring-context.xsd
       http://www.springframework.org/schema/mvc
       http://www.springframework.org/schema/mvc/spring-mvc.xsd
       http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop-3.0.xsd"
	default-lazy-init="true">
     
    <!-- AOPåŠ¨æ?ä»£ç?  true è¡¨ç¤ºä½¿ç”¨CglibåŠ¨æ?ä»£ç†ï¼Œæ˜¯å¦éœ?è¦å¼•å…¥Cglibçš„jaråŒ?-->
    <aop:aspectj-autoproxy proxy-target-class="true"/>
    <context:annotation-config></context:annotation-config>
    <!-- æ‰«æcontrollerï¼ˆcontrollerå±‚æ³¨å…¥ï¼‰ -->
    <context:component-scan base-package="org.ssm.dufy.web" use-default-filters="false">
        <context:include-filter type="annotation" expression="org.springframework.stereotype.Controller"/>
    </context:component-scan>
   
    <mvc:annotation-driven />

      <!-- å†…å®¹åå•†ç®¡ç†å™?  -->
    <!--1ã€é¦–å…ˆæ£€æŸ¥è·¯å¾„æ‰©å±•åï¼ˆå¦‚my.pdfï¼‰ï¼›2ã€å…¶æ¬¡æ£€æŸ¥Parameterï¼ˆå¦‚my?format=pdfï¼‰ï¼›3ã€æ£€æŸ¥Accept Header-->
    <bean id="contentNegotiationManager" class="org.springframework.web.accept.ContentNegotiationManagerFactoryBean">
        <!-- æ‰©å±•åè‡³mimeTypeçš„æ˜ å°?,å? /user.json => application/json -->
        <property name="favorPathExtension" value="true"/>
        <!-- ç”¨äºŽå¼?å? /userinfo/123?format=json çš„æ”¯æŒ? -->
        <property name="favorParameter" value="true"/>
        <property name="parameterName" value="format"/>
        <!-- æ˜¯å¦å¿½ç•¥Accept Header -->
        <property name="ignoreAcceptHeader" value="false"/>

        <property name="mediaTypes"> <!--æ‰©å±•ååˆ°MIMEçš„æ˜ å°„ï¼›favorPathExtension, favorParameteræ˜¯trueæ—¶èµ·ä½œç”¨  -->
            <value>
                json=application/json
                xml=application/xml
                html=text/html
            </value>
        </property>
        <!-- é»˜è®¤çš„content type -->
        <property name="defaultContentType" value="text/html"/>
    </bean>


    <!-- å½“åœ¨web.xml ä¸?   DispatcherServletä½¿ç”¨ <url-pattern>/</url-pattern> æ˜ å°„æ—¶ï¼Œèƒ½æ˜ å°„é™æ€èµ„æº? -->
    <mvc:default-servlet-handler />  
	<!-- é™æ?èµ„æºæ˜ å°? -->
    <mvc:resources mapping="/static/**" location="/WEB-INF/static/"/>
   

   <!-- å¯¹æ¨¡åž‹è§†å›¾æ·»åŠ å‰åŽç¼€ 
     <bean id="viewResolver" class="org.springframework.web.servlet.view.InternalResourceViewResolver"
      p:prefix="/WEB-INF/jsp/" p:suffix=".jsp"/>
      -->
      <!-- é»˜è®¤çš„è§†å›¾è§£æžå™¨ åœ¨ä¸Šè¾¹çš„è§£æžé”™è¯¯æ—¶ä½¿ç”? (é»˜è®¤ä½¿ç”¨html)- -->
	<bean id="defaultViewResolver"
		class="org.springframework.web.servlet.view.InternalResourceViewResolver"
		p:order="2">
		<property name="viewClass"
			value="org.springframework.web.servlet.view.JstlView" />
		<property name="contentType" value="text/html" />
		<property name="prefix" value="/WEB-INF/jsp/" />
		<property name="suffix" value=".jsp" />
	</bean>

</beans>